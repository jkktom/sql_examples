/*
 * * ==========================
ğŸ“Œ VIEW í™œìš© ë¯¸ì…˜
==========================

-- a ğŸ“Œ 1 í€´ì¦ˆ ì‘ì‹œìì˜ í‰ê·  ì ìˆ˜ë³´ë‹¤ ë†’ì€ í•™ìƒë§Œ í‘œì‹œí•˜ëŠ” ë·° ìƒì„±
-- a í€´ì¦ˆ ì‘ì‹œì ì ìˆ˜ ì „ì²´ í‰ê·  êµ¬í•˜ê¸°
-- b user_id í‘œì‹œ ë° í‰ê·  ì´ìƒë§Œ í‘œì‹œ
-- c (ìì²´ ì¶”ê°€ ë¯¸ì…˜ : user ë³„ í€´ì¦ˆ í‰ê· ì„ êµ¬í•˜ê³ , í•´ë‹¹ í‰ê· ì´ ì „ì²´ í‰ê· ë³´ë‹¤ í¬ë©´ í‘œì‹œ) */

CREATE VIEW high_score_students AS
SELECT DISTINCT
    qa.user_id
FROM quiz_attempts qa
WHERE qa.score > (
    SELECT AVG(qa2.score)
    FROM quiz_attempts qa2
    WHERE qa2.quiz_id = qa.quiz_id
);

SELECT * FROM high_score_students;
DROP VIEW high_score_students;



-- i ğŸ“Œ 2 íŠ¹ì • ê°•ì¢Œì˜ ê²°ì œ ë‚´ì—­ë§Œ í•„í„°ë§í•˜ëŠ” ë·° ìƒì„± (ê°•ì¢Œ ID 3ë²ˆì— í•´ë‹¹í•˜ëŠ” ê²°ì œ ë‚´ì—­)
-- course id 3 
-- show payment_id 
-- from payments 

CREATE VIEW see_course_id_3 AS
SELECT
   payment_id,
   course_id
  FROM payments
 WHERE course_id = 3;
 
SELECT * FROM see_course_id_3;
DROP VIEW see_course_id_3;


-- i ğŸ“Œ 3 ë²ˆ ë¬¸ì œê³¼ì œ ì œì¶œ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë·° ìƒì„±
-- on quizzes
-- show course id s
CREATE VIEW see_courses_with_quiz AS
SELECT DISTINCT
   course_id
  FROM quizzes
  
SELECT * FROM see_courses_with_quiz;
DROP VIEW see_courses_with_quiz;
